<div ng-repeat="switchServer in switchServers" class="">
	<div class="panel panel-default">
		<div class="panel-heading">
			{{switchServer.name}} ({{switchServer.ip}}:{{switchServer.port}}) - <span class="label" ng-class="switchServer.active ? 'label-success' : 'label-danger'">{{switchServer.active ? 'erreichbar': 'nicht erreichbar'}}</span>
			<div class="pull-right">
				<button type="button" ng-click="reload()" class="btn btn-xs btn-success" href="">Aktualisieren</button>
			</div>
		</div>
		<table class="table" ng-show="switchServer.active">
			<tr>
				<th>Name</th>
				<th>Version (installiert/verf√ºgbar)</th>
				<th>Loglevel</th>
				<th>Status</th>
				<th></th>
				<th>Pid</th>
				<th>Steuern</th>
				<th>Einstellungen</th>
			</tr>
			<tr ng-repeat="adapter in switchServer.status.adapter">
				<td>{{adapter.info.name}}</td>
				<td>{{adapter.status.installedVersion || "nicht installiert" }} / {{adapter.info.version}}</td>
				<td>{{adapter.settings.loglevel}}</td>
				<td>
					<h3 class="label label-xl glyphicon" ng-show="adapter.status.installedVersion" ng-class='adapter.status.status == "gestartet" ? "glyphicon-ok label-success" :  "glyphicon-exclamation-sign label-danger"' aria-hidden="true">
						<span title="{{adapter.status.statusMessage}}">
							{{adapter.status.status}}
						</span>
					</h3>
				</td>
				<td title="{{adapter.status.longStatusMessage}}">
					{{adapter.status.statusMessage}}
				</td>
				<td>{{adapter.status.pid}}</td>
				<td>
					<button ng-show="adapter.status.installedVersion" type="button" ng-click="controlAdapter('start', switchServer, adapter.info.name)" class="btn btn-xs btn-success" href="">Start</button>
					<button ng-show="adapter.status.installedVersion" type="button" ng-click="controlAdapter('stop', switchServer, adapter.info.name)" class="btn btn-xs btn-danger" href="">Stop</button>
					<button ng-show="adapter.status.installedVersion" type="button" ng-click="controlAdapter('restart', switchServer, adapter.info.name)" class="btn btn-xs btn-warning" href="">Neustart</button>
				</td>
				<td><button  ng-show="adapter.status.installedVersion" type="button" class="btn btn-xs btn-info" ng-click="openSettings(adapter, switchServer)">Einstellungen</button></td>
				<td>
					<h3
						class="label label-xl glyphicon"
						ng-class='adapter.status.installedVersion == undefined ? "glyphicon-ok label-success" :  "glyphicon-exclamation-sign label-danger"'
						aria-hidden="true"
						ng-click='controlAdapter(adapter.status.installedVersion == undefined ? "install" : "remove", switchServer, adapter.info.name)' 
						>
						{{adapter.status.installedVersion == undefined ? "installieren" :  "entfernen"}}
					</h3>
				</td>
			</tr>
		</table>
		<uib-accordion>
			<div uib-accordion-group is-open="switchServer.showLogging">
				<uib-accordion-heading>
					Logging<i class="pull-right glyphicon" ng-class="switchServer.showLogging?'glyphicon-chevron-down':'glyphicon-chevron-right'"></i>
				</uib-accordion-heading>
				<ul style="overflow-y: auto; max-height: 250px;">
					<li ng-repeat="error in switchServer.logmessages track by $index">
						{{error.time}}:{{error.message}}
					</li>
				</ul>
			</div>
		</uib-accordion>
	</div>
</div>