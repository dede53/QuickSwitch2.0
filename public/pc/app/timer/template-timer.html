<div class="card">
	<uib-accordion-heading>
		<div class="card-header">
			<h6 class="card-title" style="height:20px;">
				<span title="Zuletzt ausgeführt: {{timer.lastexec | date:'EEE, d. MMM., HH:mm'}}">
					{{timer.name}}
				</span>
				<div class="pull-right">
					<span title="Aktivieren/Deaktivieren">
						<ng-md-icon icon="{{timer.clickIcon}}" ng-attr-style="fill: {{timer.fill}}" size="25" options='{"rotation": "none"}' ng-click="$event.stopPropagation();$event.preventDefault();switchTimer(timer)"></ng-md-icon>
					</span>
					<span title="Bearbeiten">
						<ng-md-icon icon="edit" style="fill:#399BB0" size="25" options='{"rotation": "none"}' ng-click='$event.stopPropagation();$event.preventDefault();switchPage("/editTimer/" + timer.id)'></ng-md-icon>
					</span>
					<span title="Löschen">
						<ng-md-icon icon="delete" style="fill:#FF8000" size="25" options='{"rotation": "none"}' ng-click="$event.stopPropagation();$event.preventDefault();remove('timers', timer)"></ng-md-icon>
					</span>
				</div>
			</h6>
		</div>
	</uib-accordion-heading>
	<div class="card-block">
			<div ng-show="timer.variables != false" class="card">
				<ul>
					<li class="card-header">Variablen/Events</li>
					<li ng-repeat="(type, variables) in timer.variables">
						<div timer-variable-directive></div>
					</li>
				</ul>
			</div>
			<div ng-show="timer.conditions != false" class="card">
				<ul class="card-block">
					<li class="card-header">Bedingungen</li>
					<li class="list-group-item" ng-repeat="(type, conditions) in timer.conditions">
						<div ng-switch on="type">
							<div ng-switch-when="range">
								<div timer-range-directive></div>
							</div>
							<div ng-switch-when="time">
								<div timer-time-directive></div>
							</div>
							<div ng-switch-when="random">
								<div timer-random-directive></div>
							</div>
							<div ng-switch-when="weekdays">
								<div timer-weekdays-directive></div>
							</div>
						</div>
					</li>
				</ul>
			</div>
			<div ng-show="timer.actions != false" class="card">
				<ul class="card-block">				
					<li class="card-header">
						Aktionen
						<ng-md-icon 
							icon="play_arrow"
							style="fill:lightgreen"
							class="pull-right"
							size="25"
							ng-click='switchAll("timers", timer)'>	
						</ng-md-icon>
					</li>
					<li ng-show="timer.actions" class="list-group-item" ng-repeat="(type, actions) in timer.actions">
						<div ng-switch on="type">
							<div ng-switch-when="alerts">
								<div timer-alert-directive></div>
							</div>
							<div ng-switch-when="device">
								<div timer-device-directive></div>
							</div>
							<div ng-switch-when="group">
								<div timer-group-directive></div>
							</div>
							<div ng-switch-when="room">
								<div timer-room-directive></div>
							</div>
							<div ng-switch-when="storeVariables">
								Speichere Variablen:<span ng-repeat="action in actions"> {{action.name}}</span>
							</div>
							<div ng-switch-when="saveSensors">
								<ul class="list-group">
									<li class="list-group-item">
										Speichere Sensoren
									</li>
									<li class="list-group-item" ng-show="action.activeTimeout">
										Timeout: {{action.timeout}} Sekunden
									</li>
								</ul>
							</div>
							<div ng-switch-when="pushbullets">
								<div timer-pushbullet-directive></div>
							</div>
							<div ng-switch-when="urls">
								<ul class="list-group">
									<li class="list-group-item">Urls aufrufen</li>
									<li class="list-group-item" ng-repeat="action in actions">
										Url: {{action.url}}
										Timeout: {{action.timeout}} Sekunden
									</li>
								</ul>
							</div>
							<div ng-switch-when="intervals">
								<div ng-repeat="interval in actions">
									<h6>Interval: {{interval.number}} {{interval.unit}}</h6>
									<h6>
										Action:
										<span ng-switch on="interval.type">
											<span ng-switch-when="alerts">
												<div timer-alert-directive></div>
											</span>
											<span ng-switch-when="device">
												<div timer-device-directive></div>
											</span>
											<span ng-switch-when="group">
												<div timer-group-directive></div>
											</span>
											<span ng-switch-when="room">
												<div timer-room-directive></div>
											</span>
											<span ng-switch-when="storeVariables">
												Speichere Variablen:<span ng-repeat="action in actions"> {{action.name}}</span>
											</span>
											<span ng-switch-when="saveSensors">
												Speichere Sensoren
											</span>
											<span ng-switch-when="urls">
												<ul class="list-group">
													<li class="list-group-item">Urls aufrufen</li>
													<li class="list-group-item" ng-repeat="url in interval.action">
														Url: {{url.url}}<br>
														Timeout: {{url.timeout}} Sekunden
													</li>
												</ul>
											</span>
											<span ng-switch-default>
												<div>{{type}}{{action}}</div>
											</span>
										</span>
									</h6>
								</div>
							</div>
							<div ng-switch-default>
								<div>{{type}}{{action}}</div>
							</div>
						</div>
					</li>
				</ul>
			</div>
	</div>
</div>