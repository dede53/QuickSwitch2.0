<!DOCTYPE html>
<html lang="de">
	<head>

		<script src="assets/libs/snap.min.js"></script>
		<link rel='stylesheet' type='text/css' href='assets/css/index.css' />

		<meta charset="utf-8">
		<link rel="shortcut icon" href="assets/favicon.ico"/> 
		<meta http-equiv="x-ua-compatible" content="IE=edge" />
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="theme-color" content="#fff" />
		<title>SmartHome</title>
	</head>
	<body ng-app="jsbin" ng-controller="appController">




		<snap-content snap-options="snapOptions">
			<div ng-view role="main">
			</div>
		</snap-content>

		<snap-drawers>
			<snap-drawer id="snap-drawer left" >
				<ul>
					<li><a ng-click="toggleMenu('/favoriten')">Home</a></li>
					<li><a ng-click="toggleMenu('/devices')">Geräte</a></li>
					<li><a ng-click="toggleMenu('/groups')">Gruppen</a></li>
					<li><a ng-click="toggleMenu('/rooms')">Räume</a></li>
					<li><a ng-click="toggleMenu('/temperature')">Temperaturen</a></li>
					<li ng-show="activeUser.admin" ><a href="../settings">Einstellungen</a></li>
				</ul>
			</snap-drawer>
			<div snap-drawer="right" id="snap-drawer-right" style="width:300px;">
					<h3>
						<div class="left">Favoriten</div>
						<div active-user-directive class="right"></div>
					</h3>
					
				<div favoriten-directive></div>
				<h3>Aktive Geräte</h3>
				<div active-devices-directive></div>
			</div>
		</snap-drawers>

		<!--<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.js"></script>-->
		<script src="assets/libs/angular.js"></script>


		<!--<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-animate.js"></script>-->
		<script src="assets/libs/angular-animate.js"></script>

		<script src='/socket.io/socket.io.js'></script>

		<!--<script src="http://code.angularjs.org/1.2.0rc1/angular-route.min.js"></script>-->
		<script src="assets/libs/angular-route.min.js"></script>

		<!--<script src="http://code.angularjs.org/1.2.0rc1/angular-touch.min.js"></script>-->
		<script src="assets/libs/angular-touch.min.js"></script>

		<script src="./assets/libs/highcharts-ng.js"></script>

		<!--<script src="http://code.highcharts.com/adapters/standalone-framework.js"></script>-->
		<script src="assets/libs/standalone-framework.js"></script>

		<!--<script src="http://code.highcharts.com/stock/highstock.src.js"></script>-->
		<script src="assets/libs/highstock.src.js"></script>

		<!--<script src="http://rawgit.com/jtrussell/angular-snap.js-bower/master/angular-snap.min.js"></script>-->
		<script src="assets/libs/angular-snap.min.js"></script>

		<!--<script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.14.2.js"></script>-->
		<script src="assets/libs/ui-bootstrap-tpls-0.14.2.js"></script>

		
		<!--<link rel="stylesheet" href="http://rawgit.com/jtrussell/Snap.js/master/snap.css">-->
		<link rel="stylesheet" href="assets/libs/snap.css">

		<!--<link rel="stylesheet" href="http://rawgit.com/jtrussell/angular-snap.js-bower/master/angular-snap.css">-->
		<link rel="stylesheet" href="assets/libs/angular-snap.css">

		<!--<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">-->
		<link href="assets/libs/bootstrap.min.css" rel="stylesheet">
		
		<script type="text/javascript">
function setCookie(e,t,o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+r}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var r=o[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}var app=angular.module("jsbin",["ui.bootstrap","snap","ngAnimate","ngRoute","ngTouch","highcharts-ng"]);app.config(["$routeProvider",function(e){e.when("/favoriten",{templateUrl:"./app/home/index.html",controller:"homeController"}).when("/devices",{templateUrl:"./app/devices/index.html",controller:"devicesController"}).when("/groups",{templateUrl:"./app/groups/index.html",controller:"groupsController"}).when("/rooms",{templateUrl:"./app/rooms/index.html",controller:"roomsController"}).when("/temperature",{templateUrl:"./app/temperature/index.html",controller:"temperatureController"}).otherwise({redirectTo:"/favoriten"})}]),app.controller("appController",["$rootScope","$scope","$location",function(e,t,o){e.moreMessagesAvible=!0,e.sharedMessages=new Array,t.storedUser=getCookie("username"),""!=t.storedUser?e.activeUser=JSON.parse(t.storedUser):(e.activeUser={},e.activeUser.favoritDevices="[1, 16, 3, 7, 14, 8, 17]",e.activeUser.name="Besucher"),t.showmenu=!1,t.toggleMenu=function(e){t.showmenu=!t.showmenu,""!=e&&o.url(e)},t.snapOptions={disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-300,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5}}]),app.factory("socket",["$rootScope",function(e){var t=io.connect();return{on:function(o,i){t.on(o,function(){var o=arguments;e.$apply(function(){i.apply(t,o)})})},emit:function(o,i,r){t.emit(o,i,function(){var o=arguments;e.$apply(function(){r&&r.apply(t,o)})})}}}]),app.controller("chatController",["$scope","socket","$location",function(e,t,o){e.moreMessagesAvible=!0,e.sharedMessages=new Array,e.link={},e.link.type="1";var i=Math.floor(Date.parse(new Date));"0"==e.sharedMessages.length&&(t.emit("loadOldMessages",i)),t.on("1234",function(t){1==t.moreMessagesAvible?(e.moreMessagesAvible=!0,t.messages.forEach(function(t){e.sharedMessages.splice(0,0,t)})):e.moreMessagesAvible=!1}),e.loadOldMessages=function(){console.log("Button wurde geclickt!"),t.emit("loadOldMessages",e.sharedMessages[0].time)}}]),app.controller("sendNewMessage",["$scope","socket",function(e,t){e.sendMessage=function(){e.linkMessage={author:e.activeUser.name,message:e.link.message,type:e.link.type},e.link.message="",t.emit("newLinkMessage",e.linkMessage)}}]),app.directive("chatDirective",["$rootScope",function(e){return{restrict:"EA",templateUrl:"./app/chat/index.html",controller:"chatController"}}]),app.controller("devicesController",["$scope","socket",function(e,t){t.emit("devices",{type:"object"}),t.on("devices",function(t){e.devicelist=t}),e.switchdeviceSlider=function(o){t.emit("switchdevice",{id:o.device.deviceid,status:e.devicelist[o.device.Raum][o.device.deviceid].status})},e.switchdevice=function(e){t.emit("switchdevice",{id:e.id,status:e.status})},t.on("switchDevice",function(t){e.devicelist[t.device.Raum][t.device.deviceid].status=t.status})}]),app.directive("buttonDirective",["$rootScope",function(e){return{restrict:"EA",templateUrl:"./app/devices/button.html"}}]),app.directive("sliderDirective",["$rootScope",function(e){return{restrict:"EA",templateUrl:"./app/devices/slider.html"}}]),app.controller("groupsController",["$scope","$rootScope","socket",function(e,t,o){o.emit("groups"),o.on("groups",function(e){t.grouplist=e}),e.switchgroup=function(e){o.emit("switchGroup",e)}}]),app.controller("favoritDevices",["$rootScope","$scope","socket",function(e,t,o){o.emit("favoritDevices",e.activeUser),o.on("favoritDevices",function(e){t.favoritDevices=e}),o.on("switchDevice",function(e){t.favoritDevices[e.device.deviceid].status=e.status}),t.switchdevice=function(e){o.emit("switchdevice",{id:e.id,status:e.status})},t.switchdeviceSlider=function(e){o.emit("switchdevice",{id:e.id,status:t.favoritDevices[e.id].status})}}]),app.controller("activeDevices",["$rootScope","$scope","socket",function(e,t,o){t.activedeviceslist=[],o.emit("sendActiveDevices"),o.on("activedevices",function(e){t.activedeviceslist=e.activedevices}),t.switchalldevices=function(e){o.emit("switchalldevices",{status:e.status})}}]),app.controller("activeUser",["$rootScope","$scope","socket",function(e,t,o){o.emit("newuser"),o.on("newuser",function(e){t.values=e;var o={name:"Admin",admin:"true"};t.values.push(o)}),t.setUser=function(){"true"!=e.activeUser.admin&&(o.emit("favoritDevices",e.activeUser),setCookie("username",JSON.stringify(e.activeUser),365))}}]),app.controller("homeController",["$rootScope","$scope","socket",function(e,t,o){}]),app.directive("favoritenDirective",["$rootScope",function(e){return{restrict:"EA",templateUrl:"./app/home/devicelist.html",controller:"favoritDevices"}}]),app.directive("activeDevicesDirective",["$rootScope",function(e){return{restrict:"EA",templateUrl:"./app/home/activedevicelist.html",controller:"activeDevices"}}]),app.directive("activeUserDirective",["$rootScope",function(e){return{restrict:"EA",templateUrl:"./app/home/user.html",controller:"activeUser"}}]),app.controller("roomsController",["$scope","socket",function(e,t){t.emit("rooms"),t.on("rooms",function(t){e.roomlist=t}),e.switchroom=function(e){t.emit("switchRoom",e)}}]),app.controller("temperatureController",["$scope","$rootScope","socket",function(e,t,o){o.emit("getSensorvalues",{date:"all"}),e.chartConfig="",e.chartConfig={options:{chart:{backgroundColor:"transparent"},navigator:{adaptToUpdatedData:!1,enabled:!1,series:[]},rangeSelector:{enabled:!0,buttons:[{type:"day",text:"Day"},{type:"day",count:"2",text:"2Day"},{type:"day",count:"3",text:"3Day"},{type:"week",count:"1",text:"Week"},{type:"month",count:1,text:"1m"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}]},plotOptions:{series:{lineWidth:1,fillOpacity:.5,marker:{enable:!0}},column:{stacking:"normal"},area:{stacking:"normal",marker:{enabled:!1}}},exporting:!1,xAxis:[{type:"datetime",labels:{rotation:-45}}],yAxis:[{allowDecimals:!0,title:{text:"Temperatur",style:{color:"#80a3ca"}},labels:{format:"{value}",style:{color:"#80a3ca"}}}],legend:{enabled:!0},title:{text:"Temperaturen"},credits:{enabled:!1},tooltip:{headerFormat:'<div class="header">{point.key}</div>',pointFormat:'<div class="line"><div class="circle" ></div><p class="country" style="float:left;">{series.name} {point.y}</p></div>',borderWidth:1,borderRadius:5,borderColor:"#a4a4a4",shadow:!1,useHTML:!0,percentageDecimals:2,backgroundColor:"rgba(255,255,255,.7)",style:{padding:5},shared:!0},useHighStocks:!1},series:[],loading:!0},o.on("Sensorvalues",function(t){t.forEach(function(t){console.log("Neue Daten");var o={id:t.nodeID,name:t.name,data:t.data,type:t.charttype,dashStyle:t.linetype,yAxis:0,connectNulls:!1,tooltip:{valueSuffix:" °C"},color:t.farbe},i={data:t.data};e.chartConfig.options.navigator.series.push(i),e.chartConfig.series.push(o),e.chartConfig.loading=!1})}),Highcharts.setOptions({global:{useUTC:!1},lang:{loading:"Lade Daten...",rangeSelectorZoom:""}}),e.getData=function(e){console.log(e)}}]);
	</script>
<!--
		<script type="text/javascript" src="./assets/js/helper.js"></script>
		<script type="text/javascript" src="./app/controller.js"></script>
		<script type="text/javascript" src="./app/factory.js"></script>
		
		<script type="text/javascript" src="./app/chat/controller.js"></script>
		<script type="text/javascript" src="./app/chat/directive.js"></script>

		<script type="text/javascript" src="./app/home/controller.js"></script>
		<script type="text/javascript" src="./app/home/directive.js"></script>
		
		<script type="text/javascript" src="./app/devices/controller.js"></script>
		<script type="text/javascript" src="./app/devices/directive.js"></script>

		<script type="text/javascript" src="./app/groups/controller.js"></script>
		<script type="text/javascript" src="./app/rooms/controller.js"></script>
		<script type="text/javascript" src="./app/temperature/controller.js"></script>
-->


	</body>
</html>